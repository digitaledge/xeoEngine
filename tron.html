<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <title>ActorJS + SceneJS - Example #2</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <script src="libs/require.js"></script>

    <script src="libs/scenejs.js"></script>

    <script src="libs/jquery-lib.1.7.1.min.js"></script>


    <link href="http://fonts.googleapis.com/css?family=Raleway:100" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css">
    <link rel="stylesheet"
          href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|Droid+Sans+Mono&v2">

    <style>
        body {
            background-color: #000000;
            margin: 0px;
            overflow: hidden;
            height: 100%;
        }

        #theCanvas {
            width: 100%;
            height: 100%; /*position: fixed;*/
            margin: 0;
            padding: 0;
        }
    </style>

</head>
<body>

<canvas id="theCanvas" style="margin: 0; padding: 0; width: 100%;  height: 100%;"></canvas>

<script>

    jQuery(document).ready(

            function ($) {

                /* Configure RequireJS
                 */
                requirejs.config({
                    baseUrl:"."        //By default load any module IDs from ../js
                });

                require([
                    'libs/actorjs/actorjs.js'
                ],
                        function () {

                            /* Tell ActorJS where to find actor types
                             */
                            ActorJS.configure({
                                actorClassPath:"actors/"
                            });

                            /* Scene
                             */
                            ActorJS.call("addActor", {
                                type:"scene",
                                actorId:"scene",
                                canvasId:"theCanvas"
                            });


                            /* Tron tank
                             */
                            ActorJS.call("scene/addActor", {
                                type:"objects/vehicles/tank",
                                actorId:"tank"
                            });


                            /* Tank pilot - animates the tank
                             */
//                scope.call("addActor", {
//                    type:"objects/vehicles/tank/pilot",
//                    actorId:"pilot",
//                    tankActorId:"tank"
//                });


                            ActorJS.call("addActor", {
                                type:"scene/camera/flight",
                                actorId:"cameraFlight",
                                cameraActorId:"camera"
                            });

                            /* Camera tracking of tank position and direction
                             */
                            ActorJS.call("addActor", {
                                type:"objects/vehicles/tank/cameraTracking",
                                actorId:"cameraTracking",
                                tankActorId:"tank",
                                cameraActorId:"camera",
                                trackLook:true,
                                trackEye:false
                            });

                            ActorJS.call("camera.setEye", { x:100, y:60, z:-100 });

                            /* Ground
                             */
                            ActorJS.call("addActor", {
                                type:"objects/ground/grid2"
                            });

                            ActorJS.call("pilot.setPos", { x:0, y:0, z:900 });

                            ActorJS.call("addActor", {
                                type:"utils/schedule",
                                calls:[
                                    {
                                        time:1,
                                        method:"pilot.setSpeed",
                                        params:{
                                            speed:1.5
                                        }
                                    },
                                    {
                                        time:5,
                                        method:"pilot.turn",
                                        params:{
                                            speed:0.1
                                        }
                                    },
                                    {
                                        time:10,
                                        method:"cameraTracking.trackEye",
                                        params:{
                                            enabled:true
                                        }
                                    },

                                    {
                                        time:5,
                                        method:"pilot.turnGun",
                                        params:{
                                            speed:-0.1
                                        }
                                    },
                                    {
                                        time:10,
                                        method:"pilot.turn",
                                        params:{
                                            speed:-.5
                                        }
                                    },
                                    {
                                        time:20,
                                        method:"cameraTracking.trackEye",
                                        params:{
                                            enabled:false
                                        }
                                    },

                                ]
                            });

                            /* Add building
                             */
                            ActorJS.call("addActor", {
                                type:"objects/buildings/city",
                                actorId:"myCity",

                                xPos:0,
                                zPos:0,

                                xBuildings:6,
                                zBuildings:8,

                                xWidth:600,
                                zWidth:600,

                                streetWidth:20
                            });
                        });
            });

</script>

<a href="https://github.com/xeolabs/scenejs-ActorJS" target="_blank"><img
        style="position: absolute; top: 0; right: 0; border: 0;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"
        alt="Fork me on GitHub"></a>

</body>
</html>